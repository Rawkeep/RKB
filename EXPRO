<!DOCTYPE html>

<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Intelligente Transportlogistik & Containerplanung - Offline Web-App">
    <meta name="theme-color" content="#0a1628">
    <title>TransportLogistik Pro | Afrika-Export</title>

```
<!-- PWA Manifest -->
<link rel="manifest" href="data:application/json,{
    &quot;name&quot;: &quot;TransportLogistik Pro&quot;,
    &quot;short_name&quot;: &quot;TL Pro&quot;,
    &quot;start_url&quot;: &quot;.&quot;,
    &quot;display&quot;: &quot;standalone&quot;,
    &quot;background_color&quot;: &quot;#0a1628&quot;,
    &quot;theme_color&quot;: &quot;#0a1628&quot;
}">

<!-- Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;1,9..40,400&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">

<style>
    /* ================================================
       CSS VARIABLES & RESET
       ================================================ */
    :root {
        /* Colors - Industrial Maritime Theme */
        --bg-primary: #0a1628;
        --bg-secondary: #0f2240;
        --bg-card: #152a4a;
        --bg-card-hover: #1a3358;
        --bg-input: #0d1e38;
        
        --accent-primary: #00d4aa;
        --accent-secondary: #00b894;
        --accent-warning: #fdcb6e;
        --accent-danger: #e17055;
        --accent-info: #74b9ff;
        --accent-sea: #0984e3;
        --accent-air: #a29bfe;
        
        --text-primary: #f5f6fa;
        --text-secondary: #b2bec3;
        --text-muted: #636e72;
        
        --border-color: rgba(0, 212, 170, 0.15);
        --border-active: rgba(0, 212, 170, 0.4);
        
        /* Typography */
        --font-body: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
        --font-mono: 'JetBrains Mono', 'SF Mono', monospace;
        
        /* Spacing */
        --space-xs: 0.25rem;
        --space-sm: 0.5rem;
        --space-md: 1rem;
        --space-lg: 1.5rem;
        --space-xl: 2rem;
        --space-2xl: 3rem;
        
        /* Border Radius */
        --radius-sm: 6px;
        --radius-md: 10px;
        --radius-lg: 16px;
        --radius-xl: 24px;
        
        /* Shadows */
        --shadow-sm: 0 2px 8px rgba(0,0,0,0.2);
        --shadow-md: 0 4px 20px rgba(0,0,0,0.3);
        --shadow-lg: 0 8px 40px rgba(0,0,0,0.4);
        --shadow-glow: 0 0 30px rgba(0, 212, 170, 0.15);
        
        /* Transitions */
        --transition-fast: 150ms ease;
        --transition-base: 250ms ease;
        --transition-slow: 400ms cubic-bezier(0.4, 0, 0.2, 1);
    }

    *, *::before, *::after {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
    }

    html {
        font-size: 16px;
        scroll-behavior: smooth;
    }

    body {
        font-family: var(--font-body);
        background: var(--bg-primary);
        color: var(--text-primary);
        line-height: 1.6;
        min-height: 100vh;
        overflow-x: hidden;
    }

    /* Background Pattern */
    body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: 
            radial-gradient(ellipse at 20% 0%, rgba(0, 212, 170, 0.08) 0%, transparent 50%),
            radial-gradient(ellipse at 80% 100%, rgba(9, 132, 227, 0.08) 0%, transparent 50%),
            repeating-linear-gradient(
                0deg,
                transparent,
                transparent 100px,
                rgba(0, 212, 170, 0.02) 100px,
                rgba(0, 212, 170, 0.02) 101px
            ),
            repeating-linear-gradient(
                90deg,
                transparent,
                transparent 100px,
                rgba(0, 212, 170, 0.02) 100px,
                rgba(0, 212, 170, 0.02) 101px
            );
        pointer-events: none;
        z-index: -1;
    }

    /* ================================================
       LAYOUT
       ================================================ */
    .app-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: var(--space-lg);
    }

    /* ================================================
       HEADER
       ================================================ */
    .app-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: var(--space-lg) 0;
        margin-bottom: var(--space-xl);
        border-bottom: 1px solid var(--border-color);
    }

    .logo {
        display: flex;
        align-items: center;
        gap: var(--space-md);
    }

    .logo-icon {
        width: 48px;
        height: 48px;
        background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-sea) 100%);
        border-radius: var(--radius-md);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        box-shadow: var(--shadow-glow);
    }

    .logo-text h1 {
        font-size: 1.5rem;
        font-weight: 700;
        letter-spacing: -0.5px;
        background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-primary) 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .logo-text span {
        font-size: 0.75rem;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 2px;
    }

    .header-actions {
        display: flex;
        gap: var(--space-sm);
    }

    .btn-icon {
        width: 44px;
        height: 44px;
        border: 1px solid var(--border-color);
        border-radius: var(--radius-md);
        background: var(--bg-card);
        color: var(--text-secondary);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all var(--transition-base);
    }

    .btn-icon:hover {
        background: var(--bg-card-hover);
        border-color: var(--border-active);
        color: var(--accent-primary);
    }

    /* ================================================
       STEP INDICATOR
       ================================================ */
    .steps-indicator {
        display: flex;
        justify-content: center;
        gap: var(--space-sm);
        margin-bottom: var(--space-2xl);
    }

    .step-dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: var(--bg-card);
        border: 2px solid var(--border-color);
        transition: all var(--transition-base);
        cursor: pointer;
    }

    .step-dot.active {
        background: var(--accent-primary);
        border-color: var(--accent-primary);
        box-shadow: 0 0 12px var(--accent-primary);
    }

    .step-dot.completed {
        background: var(--accent-secondary);
        border-color: var(--accent-secondary);
    }

    /* ================================================
       MAIN CONTENT GRID
       ================================================ */
    .main-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: var(--space-xl);
    }

    @media (max-width: 1024px) {
        .main-grid {
            grid-template-columns: 1fr;
        }
    }

    /* ================================================
       CARDS
       ================================================ */
    .card {
        background: var(--bg-card);
        border: 1px solid var(--border-color);
        border-radius: var(--radius-lg);
        padding: var(--space-xl);
        transition: all var(--transition-base);
    }

    .card:hover {
        border-color: var(--border-active);
        box-shadow: var(--shadow-md);
    }

    .card-header {
        display: flex;
        align-items: center;
        gap: var(--space-md);
        margin-bottom: var(--space-lg);
    }

    .card-icon {
        width: 40px;
        height: 40px;
        border-radius: var(--radius-md);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.25rem;
    }

    .card-icon.product { background: rgba(0, 212, 170, 0.15); }
    .card-icon.transport { background: rgba(9, 132, 227, 0.15); }
    .card-icon.result { background: rgba(253, 203, 110, 0.15); }

    .card-title {
        font-size: 1.125rem;
        font-weight: 600;
        color: var(--text-primary);
    }

    .card-subtitle {
        font-size: 0.8125rem;
        color: var(--text-muted);
    }

    /* ================================================
       FORM ELEMENTS
       ================================================ */
    .form-group {
        margin-bottom: var(--space-lg);
    }

    .form-label {
        display: block;
        font-size: 0.8125rem;
        font-weight: 500;
        color: var(--text-secondary);
        margin-bottom: var(--space-sm);
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .form-input,
    .form-select {
        width: 100%;
        padding: var(--space-md) var(--space-lg);
        background: var(--bg-input);
        border: 1px solid var(--border-color);
        border-radius: var(--radius-md);
        color: var(--text-primary);
        font-family: var(--font-body);
        font-size: 1rem;
        transition: all var(--transition-base);
    }

    .form-input:focus,
    .form-select:focus {
        outline: none;
        border-color: var(--accent-primary);
        box-shadow: 0 0 0 3px rgba(0, 212, 170, 0.1);
    }

    .form-select {
        cursor: pointer;
        appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%2300d4aa' stroke-width='2'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 12px center;
        background-size: 18px;
        padding-right: 44px;
    }

    .form-input-group {
        display: flex;
        align-items: stretch;
    }

    .form-input-group .form-input {
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
    }

    .input-suffix {
        padding: var(--space-md) var(--space-lg);
        background: var(--bg-secondary);
        border: 1px solid var(--border-color);
        border-left: none;
        border-radius: 0 var(--radius-md) var(--radius-md) 0;
        color: var(--text-muted);
        font-size: 0.875rem;
        display: flex;
        align-items: center;
    }

    /* Transport Type Toggle */
    .transport-toggle {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: var(--space-sm);
        margin-bottom: var(--space-lg);
    }

    .transport-btn {
        padding: var(--space-lg);
        background: var(--bg-input);
        border: 2px solid var(--border-color);
        border-radius: var(--radius-md);
        color: var(--text-secondary);
        font-family: var(--font-body);
        font-size: 0.9375rem;
        font-weight: 500;
        cursor: pointer;
        transition: all var(--transition-base);
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: var(--space-sm);
    }

    .transport-btn:hover {
        border-color: var(--border-active);
        background: var(--bg-card-hover);
    }

    .transport-btn.active {
        border-color: var(--accent-primary);
        background: rgba(0, 212, 170, 0.1);
        color: var(--accent-primary);
    }

    .transport-btn.active.sea {
        border-color: var(--accent-sea);
        background: rgba(9, 132, 227, 0.1);
        color: var(--accent-sea);
    }

    .transport-btn.active.air {
        border-color: var(--accent-air);
        background: rgba(162, 155, 254, 0.1);
        color: var(--accent-air);
    }

    .transport-icon {
        font-size: 1.75rem;
    }

    /* ================================================
       PRODUCT GRID
       ================================================ */
    .product-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
        gap: var(--space-md);
    }

    .product-card {
        padding: var(--space-lg);
        background: var(--bg-input);
        border: 2px solid var(--border-color);
        border-radius: var(--radius-md);
        cursor: pointer;
        transition: all var(--transition-base);
        text-align: center;
    }

    .product-card:hover {
        border-color: var(--border-active);
        transform: translateY(-2px);
    }

    .product-card.selected {
        border-color: var(--accent-primary);
        background: rgba(0, 212, 170, 0.08);
    }

    .product-card.selected .product-name {
        color: var(--accent-primary);
    }

    .product-emoji {
        font-size: 2rem;
        margin-bottom: var(--space-sm);
        display: block;
    }

    .product-name {
        font-size: 0.9375rem;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: var(--space-xs);
    }

    .product-code {
        font-family: var(--font-mono);
        font-size: 0.75rem;
        color: var(--text-muted);
    }

    /* ================================================
       RESULTS SECTION
       ================================================ */
    .results-card {
        background: linear-gradient(135deg, var(--bg-card) 0%, var(--bg-secondary) 100%);
        border: 1px solid var(--border-active);
    }

    .result-badge {
        display: inline-flex;
        align-items: center;
        gap: var(--space-sm);
        padding: var(--space-sm) var(--space-md);
        background: rgba(0, 212, 170, 0.15);
        border-radius: var(--radius-sm);
        font-family: var(--font-mono);
        font-size: 0.8125rem;
        font-weight: 600;
        color: var(--accent-primary);
        margin-bottom: var(--space-lg);
    }

    .result-badge.palette {
        background: rgba(253, 203, 110, 0.15);
        color: var(--accent-warning);
    }

    .result-badge.loose {
        background: rgba(0, 212, 170, 0.15);
        color: var(--accent-primary);
    }

    .results-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: var(--space-md);
        margin-bottom: var(--space-lg);
    }

    .result-item {
        padding: var(--space-md);
        background: var(--bg-input);
        border-radius: var(--radius-md);
        border: 1px solid var(--border-color);
    }

    .result-label {
        font-size: 0.75rem;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-bottom: var(--space-xs);
    }

    .result-value {
        font-family: var(--font-mono);
        font-size: 1.5rem;
        font-weight: 600;
        color: var(--text-primary);
    }

    .result-value.highlight {
        color: var(--accent-primary);
    }

    .result-unit {
        font-size: 0.875rem;
        color: var(--text-secondary);
        font-weight: 400;
    }

    /* ================================================
       CONTAINER VISUALIZATION
       ================================================ */
    .container-viz {
        background: var(--bg-input);
        border-radius: var(--radius-md);
        padding: var(--space-lg);
        margin-top: var(--space-lg);
    }

    .container-viz-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: var(--space-md);
    }

    .container-viz-title {
        font-size: 0.875rem;
        font-weight: 600;
        color: var(--text-secondary);
    }

    .container-viz-info {
        font-family: var(--font-mono);
        font-size: 0.75rem;
        color: var(--text-muted);
    }

    .container-grid {
        display: grid;
        gap: 4px;
        padding: var(--space-md);
        background: var(--bg-secondary);
        border-radius: var(--radius-sm);
        min-height: 80px;
    }

    .container-grid.level-1 {
        grid-template-columns: repeat(10, 1fr);
    }

    .container-grid.level-2 {
        grid-template-columns: repeat(10, 1fr);
        margin-top: var(--space-sm);
    }

    .pallet-slot {
        aspect-ratio: 1.5;
        background: var(--bg-card);
        border-radius: 3px;
        border: 1px solid var(--border-color);
        transition: all var(--transition-fast);
    }

    .pallet-slot.filled {
        background: linear-gradient(135deg, var(--accent-sea) 0%, var(--accent-primary) 100%);
        border-color: var(--accent-primary);
    }

    .pallet-slot.filled.level-2 {
        background: linear-gradient(135deg, var(--accent-air) 0%, var(--accent-sea) 100%);
    }

    .container-legend {
        display: flex;
        gap: var(--space-lg);
        margin-top: var(--space-md);
        font-size: 0.75rem;
        color: var(--text-muted);
    }

    .legend-item {
        display: flex;
        align-items: center;
        gap: var(--space-sm);
    }

    .legend-dot {
        width: 12px;
        height: 12px;
        border-radius: 3px;
    }

    .legend-dot.level-1 {
        background: linear-gradient(135deg, var(--accent-sea) 0%, var(--accent-primary) 100%);
    }

    .legend-dot.level-2 {
        background: linear-gradient(135deg, var(--accent-air) 0%, var(--accent-sea) 100%);
    }

    /* ================================================
       SUMMARY BOX
       ================================================ */
    .summary-box {
        background: linear-gradient(135deg, rgba(0, 212, 170, 0.1) 0%, rgba(9, 132, 227, 0.1) 100%);
        border: 1px solid var(--accent-primary);
        border-radius: var(--radius-md);
        padding: var(--space-lg);
        margin-top: var(--space-lg);
    }

    .summary-title {
        font-size: 0.8125rem;
        font-weight: 600;
        color: var(--accent-primary);
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-bottom: var(--space-md);
        display: flex;
        align-items: center;
        gap: var(--space-sm);
    }

    .summary-text {
        font-size: 0.9375rem;
        color: var(--text-primary);
        line-height: 1.7;
    }

    .summary-highlight {
        font-family: var(--font-mono);
        font-weight: 600;
        color: var(--accent-primary);
    }

    /* ================================================
       BUTTONS
       ================================================ */
    .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: var(--space-sm);
        padding: var(--space-md) var(--space-xl);
        border-radius: var(--radius-md);
        font-family: var(--font-body);
        font-size: 0.9375rem;
        font-weight: 600;
        cursor: pointer;
        transition: all var(--transition-base);
        border: none;
    }

    .btn-primary {
        background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
        color: var(--bg-primary);
    }

    .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 212, 170, 0.3);
    }

    .btn-secondary {
        background: var(--bg-card);
        border: 1px solid var(--border-color);
        color: var(--text-secondary);
    }

    .btn-secondary:hover {
        border-color: var(--border-active);
        color: var(--accent-primary);
    }

    .actions-row {
        display: flex;
        gap: var(--space-md);
        margin-top: var(--space-xl);
    }

    /* ================================================
       DATA TABLE
       ================================================ */
    .data-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: var(--space-lg);
    }

    .data-table th,
    .data-table td {
        padding: var(--space-md);
        text-align: left;
        border-bottom: 1px solid var(--border-color);
    }

    .data-table th {
        font-size: 0.75rem;
        font-weight: 600;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .data-table td {
        font-family: var(--font-mono);
        font-size: 0.875rem;
        color: var(--text-primary);
    }

    /* ================================================
       TOAST NOTIFICATIONS
       ================================================ */
    .toast {
        position: fixed;
        bottom: var(--space-xl);
        right: var(--space-xl);
        padding: var(--space-md) var(--space-lg);
        background: var(--bg-card);
        border: 1px solid var(--accent-primary);
        border-radius: var(--radius-md);
        color: var(--text-primary);
        font-size: 0.875rem;
        box-shadow: var(--shadow-lg);
        transform: translateY(100px);
        opacity: 0;
        transition: all var(--transition-slow);
        z-index: 1000;
    }

    .toast.show {
        transform: translateY(0);
        opacity: 1;
    }

    /* ================================================
       OFFLINE INDICATOR
       ================================================ */
    .offline-badge {
        display: flex;
        align-items: center;
        gap: var(--space-sm);
        padding: var(--space-xs) var(--space-md);
        background: rgba(0, 212, 170, 0.1);
        border-radius: var(--radius-sm);
        font-size: 0.75rem;
        color: var(--accent-primary);
    }

    .offline-dot {
        width: 8px;
        height: 8px;
        background: var(--accent-primary);
        border-radius: 50%;
        animation: pulse 2s infinite;
    }

    @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
    }

    /* ================================================
       QUICK CALC SECTION
       ================================================ */
    .quick-calc-section {
        grid-column: 1 / -1;
        margin-top: var(--space-xl);
    }

    .quick-calc-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: var(--space-lg);
    }

    .quick-calc-title {
        font-size: 1.25rem;
        font-weight: 600;
    }

    .positions-table {
        background: var(--bg-card);
        border-radius: var(--radius-lg);
        overflow: hidden;
        border: 1px solid var(--border-color);
    }

    .positions-table-header {
        display: grid;
        grid-template-columns: 60px 1fr 120px 140px 120px 120px 60px;
        gap: var(--space-md);
        padding: var(--space-md) var(--space-lg);
        background: var(--bg-secondary);
        font-size: 0.75rem;
        font-weight: 600;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .position-row {
        display: grid;
        grid-template-columns: 60px 1fr 120px 140px 120px 120px 60px;
        gap: var(--space-md);
        padding: var(--space-md) var(--space-lg);
        border-bottom: 1px solid var(--border-color);
        align-items: center;
    }

    .position-row:last-child {
        border-bottom: none;
    }

    .position-num {
        font-family: var(--font-mono);
        font-weight: 600;
        color: var(--text-muted);
    }

    .position-input {
        padding: var(--space-sm) var(--space-md);
        background: var(--bg-input);
        border: 1px solid var(--border-color);
        border-radius: var(--radius-sm);
        color: var(--text-primary);
        font-family: var(--font-body);
        font-size: 0.875rem;
        width: 100%;
    }

    .position-input:focus {
        outline: none;
        border-color: var(--accent-primary);
    }

    .position-result {
        font-family: var(--font-mono);
        font-size: 0.875rem;
        color: var(--accent-primary);
        font-weight: 600;
    }

    .position-result.palette {
        color: var(--accent-warning);
    }

    .btn-remove {
        width: 32px;
        height: 32px;
        border-radius: var(--radius-sm);
        background: transparent;
        border: 1px solid var(--border-color);
        color: var(--text-muted);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all var(--transition-fast);
    }

    .btn-remove:hover {
        background: rgba(225, 112, 85, 0.1);
        border-color: var(--accent-danger);
        color: var(--accent-danger);
    }

    .positions-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: var(--space-lg);
        background: var(--bg-secondary);
    }

    .total-pallets {
        font-size: 1.125rem;
        font-weight: 600;
    }

    .total-pallets span {
        font-family: var(--font-mono);
        font-size: 1.5rem;
        color: var(--accent-primary);
        margin-left: var(--space-sm);
    }

    /* ================================================
       PRINT STYLES
       ================================================ */
    @media print {
        body {
            background: white;
            color: black;
        }
        
        body::before {
            display: none;
        }
        
        .app-header,
        .btn,
        .btn-remove,
        .form-input,
        .form-select,
        .transport-btn {
            print-color-adjust: exact;
            -webkit-print-color-adjust: exact;
        }
        
        .card {
            break-inside: avoid;
            page-break-inside: avoid;
        }
    }

    /* ================================================
       RESPONSIVE
       ================================================ */
    @media (max-width: 768px) {
        .app-container {
            padding: var(--space-md);
        }
        
        .app-header {
            flex-direction: column;
            gap: var(--space-md);
            text-align: center;
        }
        
        .results-grid {
            grid-template-columns: 1fr;
        }
        
        .product-grid {
            grid-template-columns: repeat(2, 1fr);
        }
        
        .positions-table-header,
        .position-row {
            grid-template-columns: 40px 1fr 80px;
        }
        
        .positions-table-header > *:nth-child(n+4),
        .position-row > *:nth-child(n+4) {
            display: none;
        }
    }
</style>
```

</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="logo">
                <div class="logo-icon">üö¢</div>
                <div class="logo-text">
                    <h1>TransportLogistik Pro</h1>
                    <span>Afrika-Export Edition</span>
                </div>
            </div>
            <div class="header-actions">
                <div class="offline-badge">
                    <div class="offline-dot"></div>
                    Offline Ready
                </div>
                <button class="btn-icon" onclick="exportPDF()" title="Als PDF exportieren">
                    üìÑ
                </button>
                <button class="btn-icon" onclick="resetCalculator()" title="Zur√ºcksetzen">
                    üîÑ
                </button>
            </div>
        </header>

```
    <!-- Step Indicator -->
    <div class="steps-indicator">
        <div class="step-dot active" data-step="1"></div>
        <div class="step-dot" data-step="2"></div>
        <div class="step-dot" data-step="3"></div>
        <div class="step-dot" data-step="4"></div>
    </div>

    <!-- Main Grid -->
    <main class="main-grid">
        <!-- Input Card: Product Selection -->
        <div class="card">
            <div class="card-header">
                <div class="card-icon product">üì¶</div>
                <div>
                    <div class="card-title">Produktauswahl</div>
                    <div class="card-subtitle">Schritt 1: Verpackungsart w√§hlen</div>
                </div>
            </div>
            
            <div class="product-grid" id="productGrid">
                <div class="product-card selected" data-product="015AA" onclick="selectProduct('015AA')">
                    <span class="product-emoji">ü´ô</span>
                    <div class="product-name">Kanister 15L</div>
                    <div class="product-code">015AA</div>
                </div>
                <div class="product-card" data-product="030AA" onclick="selectProduct('030AA')">
                    <span class="product-emoji">üõ¢Ô∏è</span>
                    <div class="product-name">Kanister 30L</div>
                    <div class="product-code">030AA</div>
                </div>
                <div class="product-card" data-product="027AA" onclick="selectProduct('027AA')">
                    <span class="product-emoji">üì¶</span>
                    <div class="product-name">Karton klein</div>
                    <div class="product-code">027AA</div>
                </div>
                <div class="product-card" data-product="064AA" onclick="selectProduct('064AA')">
                    <span class="product-emoji">üì¶</span>
                    <div class="product-name">Karton gro√ü</div>
                    <div class="product-code">064AA</div>
                </div>
                <div class="product-card" data-product="033AA" onclick="selectProduct('033AA')">
                    <span class="product-emoji">ü™£</span>
                    <div class="product-name">Fass 33L</div>
                    <div class="product-code">033AA</div>
                </div>
            </div>

            <div class="form-group" style="margin-top: var(--space-xl);">
                <label class="form-label">Menge eingeben</label>
                <div class="form-input-group">
                    <input type="number" class="form-input" id="quantity" value="100" min="1" onchange="calculate()">
                    <span class="input-suffix">St√ºck</span>
                </div>
            </div>
        </div>

        <!-- Input Card: Transport Selection -->
        <div class="card">
            <div class="card-header">
                <div class="card-icon transport">üåç</div>
                <div>
                    <div class="card-title">Transportart</div>
                    <div class="card-subtitle">Schritt 2: See- oder Luftfracht</div>
                </div>
            </div>

            <div class="transport-toggle">
                <button class="transport-btn active sea" data-transport="sea" onclick="selectTransport('sea')">
                    <span class="transport-icon">üö¢</span>
                    Seefracht
                </button>
                <button class="transport-btn air" data-transport="air" onclick="selectTransport('air')">
                    <span class="transport-icon">‚úàÔ∏è</span>
                    Luftfracht
                </button>
            </div>

            <div class="form-group" id="containerSelect">
                <label class="form-label">Containertyp</label>
                <select class="form-select" id="containerType" onchange="calculate()">
                    <option value="20std">20' Standard</option>
                    <option value="40std">40' Standard</option>
                    <option value="40hc" selected>40' High Cube</option>
                </select>
            </div>

            <div class="form-group" id="airInfo" style="display: none;">
                <div style="padding: var(--space-lg); background: rgba(162, 155, 254, 0.1); border-radius: var(--radius-md); border: 1px solid var(--accent-air);">
                    <div style="font-weight: 600; color: var(--accent-air); margin-bottom: var(--space-sm);">
                        ‚úàÔ∏è Luftfracht-Modus
                    </div>
                    <div style="font-size: 0.875rem; color: var(--text-secondary);">
                        Maximale Palettenh√∂he: <strong style="color: var(--accent-air);">160 cm</strong><br>
                        Lagenanzahl wird automatisch begrenzt.
                    </div>
                </div>
            </div>

            <!-- Product Specs Display -->
            <div class="form-group" style="margin-top: var(--space-lg);">
                <label class="form-label">Produktdaten</label>
                <table class="data-table">
                    <tr>
                        <th>Eigenschaft</th>
                        <th>Wert</th>
                    </tr>
                    <tr>
                        <td>Ma√üe (L√óB√óH)</td>
                        <td id="specDimensions">235 √ó 195 √ó 433 mm</td>
                    </tr>
                    <tr>
                        <td>Gesamtgewicht</td>
                        <td id="specWeight">15.65 kg</td>
                    </tr>
                    <tr>
                        <td>Max. lose</td>
                        <td id="specLoose">9 St√ºck</td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- Results Card -->
        <div class="card results-card" style="grid-column: 1 / -1;">
            <div class="card-header">
                <div class="card-icon result">üìä</div>
                <div>
                    <div class="card-title">Berechnungsergebnis</div>
                    <div class="card-subtitle">Automatische Transportplanung</div>
                </div>
            </div>

            <div id="resultBadge" class="result-badge palette">
                üì¶ PALETTIERT
            </div>

            <div class="results-grid">
                <div class="result-item">
                    <div class="result-label">Versandart</div>
                    <div class="result-value" id="resultShipment">Palettiert</div>
                </div>
                <div class="result-item">
                    <div class="result-label">Gesamtgewicht</div>
                    <div class="result-value" id="resultWeight">1.565 <span class="result-unit">kg</span></div>
                </div>
                <div class="result-item">
                    <div class="result-label">Ben√∂tigte Paletten</div>
                    <div class="result-value highlight" id="resultPallets">2</div>
                </div>
                <div class="result-item">
                    <div class="result-label">Lagen pro Palette</div>
                    <div class="result-value" id="resultLayers">3</div>
                </div>
                <div class="result-item">
                    <div class="result-label">St√ºck pro Palette</div>
                    <div class="result-value" id="resultPerPallet">50</div>
                </div>
                <div class="result-item">
                    <div class="result-label">Palettenh√∂he</div>
                    <div class="result-value" id="resultHeight">145 <span class="result-unit">cm</span></div>
                </div>
            </div>

            <!-- Container Visualization -->
            <div class="container-viz" id="containerViz">
                <div class="container-viz-header">
                    <div class="container-viz-title">Container-Beladung: 40' High Cube</div>
                    <div class="container-viz-info" id="containerInfo">20 Pl√§tze √ó 2 Ebenen = 40 Paletten max.</div>
                </div>
                <div id="containerLevel1" class="container-grid level-1"></div>
                <div id="containerLevel2" class="container-grid level-2"></div>
                <div class="container-legend">
                    <div class="legend-item">
                        <div class="legend-dot level-1"></div>
                        Ebene 1 (Boden)
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot level-2"></div>
                        Ebene 2 (gestapelt)
                    </div>
                </div>
            </div>

            <!-- Summary -->
            <div class="summary-box">
                <div class="summary-title">
                    üìã Zusammenfassung
                </div>
                <div class="summary-text" id="summaryText">
                    <span class="summary-highlight">100 St√ºck</span> Kanister 15L (015AA) werden auf 
                    <span class="summary-highlight">2 Europaletten</span> mit je 
                    <span class="summary-highlight">3 Lagen</span> verpackt. 
                    Palettenh√∂he: <span class="summary-highlight">145 cm</span>.
                    Bei Seefracht mit <span class="summary-highlight">40' HC Container</span> werden 
                    <span class="summary-highlight">1 Container</span> ben√∂tigt.
                </div>
            </div>

            <div class="actions-row">
                <button class="btn btn-primary" onclick="exportPDF()">
                    üìÑ Als PDF exportieren
                </button>
                <button class="btn btn-secondary" onclick="copyToClipboard()">
                    üìã Kopieren
                </button>
            </div>
        </div>

        <!-- Quick Calculation Section -->
        <section class="quick-calc-section">
            <div class="quick-calc-header">
                <h2 class="quick-calc-title">‚ö° Schnellkalkulation ‚Äì Mehrere Positionen</h2>
                <button class="btn btn-secondary" onclick="addPosition()">
                    + Position hinzuf√ºgen
                </button>
            </div>

            <div class="positions-table">
                <div class="positions-table-header">
                    <div>Pos.</div>
                    <div>Produkt</div>
                    <div>Menge</div>
                    <div>Transport</div>
                    <div>Versandart</div>
                    <div>Paletten</div>
                    <div></div>
                </div>
                <div id="positionsContainer">
                    <!-- Position rows will be added here -->
                </div>
                <div class="positions-footer">
                    <div class="total-pallets">
                        Gesamt Paletten: <span id="totalPallets">0</span>
                    </div>
                    <button class="btn btn-primary" onclick="exportAllPositions()">
                        üìä Alle exportieren
                    </button>
                </div>
            </div>
        </section>
    </main>
</div>

<!-- Toast -->
<div class="toast" id="toast"></div>

<script>
    // ================================================
    // DATA CONFIGURATION
    // ================================================
    const CONFIG = {
        // Gewichtsgrenze f√ºr Palettierung (kg)
        weightLimit: 150,
        
        // Max. H√∂he Luftfracht (cm)
        maxAirHeight: 160,
        
        // Europalette Ma√üe (mm)
        pallet: {
            length: 1200,
            width: 800,
            height: 146,
            weight: 24
        }
    };

    const PRODUCTS = {
        '015AA': {
            name: 'Kanister 15L',
            code: '015AA',
            dimensions: { l: 235, w: 195, h: 433 },
            emptyWeight: 0.65,
            fillWeight: 15.0,
            get totalWeight() { return this.emptyWeight + this.fillWeight; },
            maxLoose: 9,
            layers: {
                1: { height: 58, pieces: 20 },
                2: { height: 102, pieces: 40 },
                3: { height: 145, pieces: 50 }
            },
            maxLayers: 3
        },
        '030AA': {
            name: 'Kanister 30L',
            code: '030AA',
            dimensions: { l: 376, w: 288, h: 400 },
            emptyWeight: 1.30,
            fillWeight: 25.0,
            get totalWeight() { return this.emptyWeight + this.fillWeight; },
            maxLoose: 4,
            layers: {
                1: { height: 55, pieces: 8 },
                2: { height: 95, pieces: 16 },
                3: { height: 135, pieces: 20 }
            },
            maxLayers: 3
        },
        '027AA': {
            name: 'Pulver Karton klein',
            code: '027AA',
            dimensions: { l: 300, w: 300, h: 300 },
            emptyWeight: 0.83,
            fillWeight: 20.0,
            get totalWeight() { return this.emptyWeight + this.fillWeight; },
            maxLoose: 5,
            layers: {
                1: { height: 47, pieces: 6 },
                2: { height: 80, pieces: 12 },
                3: { height: 112, pieces: 18 },
                4: { height: 145, pieces: 24 },
                5: { height: 177, pieces: 30 }
            },
            maxLayers: 5
        },
        '064AA': {
            name: 'Pulver Karton gro√ü',
            code: '064AA',
            dimensions: { l: 390, w: 390, h: 430 },
            emptyWeight: 1.44,
            fillWeight: 25.0,
            get totalWeight() { return this.emptyWeight + this.fillWeight; },
            maxLoose: 4,
            layers: {
                1: { height: 62, pieces: 6 },
                2: { height: 108, pieces: 12 },
                3: { height: 154, pieces: 18 },
                4: { height: 201, pieces: 20 }
            },
            maxLayers: 4
        },
        '033AA': {
            name: 'Fass 33L',
            code: '033AA',
            dimensions: { l: 398, w: 398, h: 396 },
            emptyWeight: 11.25,
            fillWeight: 33.0,
            get totalWeight() { return this.emptyWeight + this.fillWeight; },
            maxLoose: 4,
            layers: {
                1: { height: 55, pieces: 6 },
                2: { height: 94, pieces: 12 },
                3: { height: 134, pieces: 18 }
            },
            maxLayers: 3
        }
    };

    const CONTAINERS = {
        '20std': {
            name: "20' Standard",
            length: 5.90,
            width: 2.35,
            height: 2.39,
            maxLoad: 21770
        },
        '40std': {
            name: "40' Standard",
            length: 12.03,
            width: 2.35,
            height: 2.39,
            maxLoad: 26680
        },
        '40hc': {
            name: "40' High Cube",
            length: 12.03,
            width: 2.35,
            height: 2.69,
            maxLoad: 26460
        }
    };

    // ================================================
    // STATE
    // ================================================
    let state = {
        selectedProduct: '015AA',
        quantity: 100,
        transport: 'sea',
        container: '40hc',
        positions: []
    };

    // ================================================
    // CALCULATION LOGIC
    // ================================================
    function calculateShipment(productCode, quantity, transport, containerType) {
        const product = PRODUCTS[productCode];
        const container = CONTAINERS[containerType];
        
        const totalWeight = quantity * product.totalWeight;
        
        // Entscheidung: Lose oder Palettiert
        const isLoose = quantity <= product.maxLoose && totalWeight <= CONFIG.weightLimit;
        
        if (isLoose) {
            return {
                shipmentType: 'loose',
                totalWeight: totalWeight,
                pallets: 0,
                layers: 0,
                piecesPerPallet: 0,
                palletHeight: 0,
                containersNeeded: 0
            };
        }
        
        // Palettierung berechnen
        // Max. Lagen basierend auf Transportart
        let maxLayers = product.maxLayers;
        if (transport === 'air') {
            // Bei Luftfracht: H√∂he <= 160cm
            for (let l = product.maxLayers; l >= 1; l--) {
                if (product.layers[l] && product.layers[l].height <= CONFIG.maxAirHeight) {
                    maxLayers = l;
                    break;
                }
            }
        }
        
        // Optimale Lagenzahl finden (h√∂chste unter Limit)
        let optimalLayers = 1;
        for (let l = maxLayers; l >= 1; l--) {
            if (product.layers[l]) {
                if (transport === 'air' && product.layers[l].height > CONFIG.maxAirHeight) continue;
                optimalLayers = l;
                break;
            }
        }
        
        const layerData = product.layers[optimalLayers];
        const piecesPerPallet = layerData.pieces;
        const palletHeight = layerData.height;
        
        // Ben√∂tigte Paletten
        const palletsNeeded = Math.ceil(quantity / piecesPerPallet);
        
        // Container-Berechnung (nur f√ºr Seefracht)
        let containersNeeded = 0;
        let palletsPerContainer = 0;
        let stackingLevels = 1;
        
        if (transport === 'sea') {
            // Paletten pro Ebene im Container (Europalette: 1.2m √ó 0.8m)
            const palletsLengthwise = Math.floor(container.length / 1.2);
            const palletsWidthwise = Math.floor(container.width / 0.8);
            palletsPerContainer = palletsLengthwise * palletsWidthwise;
            
            // Pr√ºfe ob Stapeln m√∂glich (2 Ebenen)
            const palletHeightM = (palletHeight + CONFIG.pallet.height) / 100; // in Meter
            if (palletHeightM * 2 <= container.height) {
                stackingLevels = 2;
                palletsPerContainer *= 2;
            }
            
            containersNeeded = Math.ceil(palletsNeeded / palletsPerContainer);
        }
        
        return {
            shipmentType: 'palletized',
            totalWeight: totalWeight,
            pallets: palletsNeeded,
            layers: optimalLayers,
            piecesPerPallet: piecesPerPallet,
            palletHeight: palletHeight,
            containersNeeded: containersNeeded,
            palletsPerContainer: palletsPerContainer,
            stackingLevels: stackingLevels
        };
    }

    // ================================================
    // UI FUNCTIONS
    // ================================================
    function selectProduct(code) {
        state.selectedProduct = code;
        
        // Update UI
        document.querySelectorAll('.product-card').forEach(card => {
            card.classList.toggle('selected', card.dataset.product === code);
        });
        
        updateProductSpecs();
        calculate();
        updateStepIndicator(2);
    }

    function selectTransport(type) {
        state.transport = type;
        
        // Update buttons
        document.querySelectorAll('.transport-btn').forEach(btn => {
            btn.classList.toggle('active', btn.dataset.transport === type);
        });
        
        // Show/hide container select or air info
        document.getElementById('containerSelect').style.display = type === 'sea' ? 'block' : 'none';
        document.getElementById('airInfo').style.display = type === 'air' ? 'block' : 'none';
        document.getElementById('containerViz').style.display = type === 'sea' ? 'block' : 'none';
        
        calculate();
        updateStepIndicator(3);
    }

    function updateProductSpecs() {
        const product = PRODUCTS[state.selectedProduct];
        const d = product.dimensions;
        
        document.getElementById('specDimensions').textContent = `${d.l} √ó ${d.w} √ó ${d.h} mm`;
        document.getElementById('specWeight').textContent = `${product.totalWeight.toFixed(2)} kg`;
        document.getElementById('specLoose').textContent = `${product.maxLoose} St√ºck`;
    }

    function calculate() {
        state.quantity = parseInt(document.getElementById('quantity').value) || 0;
        state.container = document.getElementById('containerType').value;
        
        if (state.quantity < 1) return;
        
        const result = calculateShipment(
            state.selectedProduct,
            state.quantity,
            state.transport,
            state.container
        );
        
        updateResults(result);
        updateStepIndicator(4);
    }

    function updateResults(result) {
        const product = PRODUCTS[state.selectedProduct];
        const container = CONTAINERS[state.container];
        
        // Update badge
        const badge = document.getElementById('resultBadge');
        if (result.shipmentType === 'loose') {
            badge.className = 'result-badge loose';
            badge.innerHTML = 'üì§ LOSE VERSAND';
        } else {
            badge.className = 'result-badge palette';
            badge.innerHTML = 'üì¶ PALETTIERT';
        }
        
        // Update results
        document.getElementById('resultShipment').textContent = 
            result.shipmentType === 'loose' ? 'Lose' : 'Palettiert';
        document.getElementById('resultWeight').innerHTML = 
            `${result.totalWeight.toLocaleString('de-DE', {maximumFractionDigits: 1})} <span class="result-unit">kg</span>`;
        document.getElementById('resultPallets').textContent = result.pallets;
        document.getElementById('resultLayers').textContent = result.layers || '-';
        document.getElementById('resultPerPallet').textContent = result.piecesPerPallet || '-';
        document.getElementById('resultHeight').innerHTML = 
            result.palletHeight ? `${result.palletHeight} <span class="result-unit">cm</span>` : '-';
        
        // Update container visualization
        if (state.transport === 'sea' && result.shipmentType === 'palletized') {
            updateContainerViz(result, container);
        }
        
        // Update summary
        updateSummary(result, product, container);
    }

    function updateContainerViz(result, container) {
        const vizTitle = document.querySelector('.container-viz-title');
        vizTitle.textContent = `Container-Beladung: ${container.name}`;
        
        const palletsPerLevel = result.palletsPerContainer / result.stackingLevels;
        document.getElementById('containerInfo').textContent = 
            `${palletsPerLevel} Pl√§tze √ó ${result.stackingLevels} Ebene${result.stackingLevels > 1 ? 'n' : ''} = ${result.palletsPerContainer} Paletten max.`;
        
        // Render Level 1
        const level1 = document.getElementById('containerLevel1');
        level1.innerHTML = '';
        const palletsLevel1 = Math.min(result.pallets, palletsPerLevel);
        
        for (let i = 0; i < palletsPerLevel; i++) {
            const slot = document.createElement('div');
            slot.className = `pallet-slot ${i < palletsLevel1 ? 'filled' : ''}`;
            level1.appendChild(slot);
        }
        
        // Render Level 2
        const level2 = document.getElementById('containerLevel2');
        level2.innerHTML = '';
        level2.style.display = result.stackingLevels > 1 ? 'grid' : 'none';
        
        if (result.stackingLevels > 1) {
            const palletsLevel2 = Math.max(0, result.pallets - palletsPerLevel);
            for (let i = 0; i < palletsPerLevel; i++) {
                const slot = document.createElement('div');
                slot.className = `pallet-slot ${i < palletsLevel2 ? 'filled level-2' : ''}`;
                level2.appendChild(slot);
            }
        }
    }

    function updateSummary(result, product, container) {
        const summary = document.getElementById('summaryText');
        
        if (result.shipmentType === 'loose') {
            summary.innerHTML = `
                <span class="summary-highlight">${state.quantity} St√ºck</span> ${product.name} (${product.code}) 
                werden <span class="summary-highlight">lose</span> versandt. 
                Gesamtgewicht: <span class="summary-highlight">${result.totalWeight.toFixed(1)} kg</span>.
            `;
        } else {
            let containerText = '';
            if (state.transport === 'sea') {
                containerText = `Bei Seefracht mit <span class="summary-highlight">${container.name}</span> wird 
                    <span class="summary-highlight">${result.containersNeeded} Container</span> ben√∂tigt.`;
            } else {
                containerText = `Luftfracht-konform mit max. <span class="summary-highlight">160 cm</span> Palettenh√∂he.`;
            }
            
            summary.innerHTML = `
                <span class="summary-highlight">${state.quantity} St√ºck</span> ${product.name} (${product.code}) werden auf 
                <span class="summary-highlight">${result.pallets} Europalette${result.pallets > 1 ? 'n' : ''}</span> mit je 
                <span class="summary-highlight">${result.layers} Lage${result.layers > 1 ? 'n' : ''}</span> verpackt. 
                Palettenh√∂he: <span class="summary-highlight">${result.palletHeight} cm</span>. 
                ${containerText}
            `;
        }
    }

    function updateStepIndicator(step) {
        document.querySelectorAll('.step-dot').forEach((dot, index) => {
            dot.classList.remove('active', 'completed');
            if (index + 1 < step) dot.classList.add('completed');
            if (index + 1 === step) dot.classList.add('active');
        });
    }

    // ================================================
    // QUICK CALCULATION
    // ================================================
    let positionCounter = 0;

    function addPosition() {
        positionCounter++;
        const container = document.getElementById('positionsContainer');
        
        const row = document.createElement('div');
        row.className = 'position-row';
        row.dataset.position = positionCounter;
        
        row.innerHTML = `
            <div class="position-num">${positionCounter}</div>
            <select class="position-input" onchange="calculatePosition(${positionCounter})">
                ${Object.entries(PRODUCTS).map(([code, prod]) => 
                    `<option value="${code}">${prod.name} (${code})</option>`
                ).join('')}
            </select>
            <input type="number" class="position-input" value="100" min="1" onchange="calculatePosition(${positionCounter})">
            <select class="position-input" onchange="calculatePosition(${positionCounter})">
                <option value="sea">Seefracht</option>
                <option value="air">Luftfracht</option>
            </select>
            <div class="position-result" data-result="type">-</div>
            <div class="position-result" data-result="pallets">-</div>
            <button class="btn-remove" onclick="removePosition(${positionCounter})">‚úï</button>
        `;
        
        container.appendChild(row);
        calculatePosition(positionCounter);
    }

    function calculatePosition(posNum) {
        const row = document.querySelector(`.position-row[data-position="${posNum}"]`);
        if (!row) return;
        
        const inputs = row.querySelectorAll('.position-input');
        const product = inputs[0].value;
        const quantity = parseInt(inputs[1].value) || 0;
        const transport = inputs[2].value;
        
        const result = calculateShipment(product, quantity, transport, '40hc');
        
        const typeResult = row.querySelector('[data-result="type"]');
        const palletsResult = row.querySelector('[data-result="pallets"]');
        
        typeResult.textContent = result.shipmentType === 'loose' ? 'Lose' : 'Palettiert';
        typeResult.className = `position-result ${result.shipmentType === 'loose' ? '' : 'palette'}`;
        
        palletsResult.textContent = result.pallets;
        
        updateTotalPallets();
    }

    function removePosition(posNum) {
        const row = document.querySelector(`.position-row[data-position="${posNum}"]`);
        if (row) {
            row.remove();
            updateTotalPallets();
        }
    }

    function updateTotalPallets() {
        let total = 0;
        document.querySelectorAll('[data-result="pallets"]').forEach(el => {
            total += parseInt(el.textContent) || 0;
        });
        document.getElementById('totalPallets').textContent = total;
    }

    // ================================================
    // EXPORT FUNCTIONS
    // ================================================
    function exportPDF() {
        window.print();
        showToast('Druckdialog ge√∂ffnet');
    }

    function copyToClipboard() {
        const product = PRODUCTS[state.selectedProduct];
        const result = calculateShipment(state.selectedProduct, state.quantity, state.transport, state.container);
        
        let text = `TransportLogistik Berechnung\n`;
        text += `‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n`;
        text += `Produkt: ${product.name} (${product.code})\n`;
        text += `Menge: ${state.quantity} St√ºck\n`;
        text += `Gesamtgewicht: ${result.totalWeight.toFixed(1)} kg\n`;
        text += `Versandart: ${result.shipmentType === 'loose' ? 'Lose' : 'Palettiert'}\n`;
        
        if (result.shipmentType === 'palletized') {
            text += `Paletten: ${result.pallets}\n`;
            text += `Lagen: ${result.layers}\n`;
            text += `Palettenh√∂he: ${result.palletHeight} cm\n`;
            if (state.transport === 'sea') {
                text += `Container: ${result.containersNeeded}x ${CONTAINERS[state.container].name}\n`;
            }
        }
        
        navigator.clipboard.writeText(text).then(() => {
            showToast('In Zwischenablage kopiert!');
        });
    }

    function exportAllPositions() {
        let csv = 'Position;Produkt;Menge;Transport;Versandart;Paletten\n';
        
        document.querySelectorAll('.position-row').forEach((row, index) => {
            const inputs = row.querySelectorAll('.position-input');
            const product = PRODUCTS[inputs[0].value];
            const quantity = inputs[1].value;
            const transport = inputs[2].value === 'sea' ? 'Seefracht' : 'Luftfracht';
            const type = row.querySelector('[data-result="type"]').textContent;
            const pallets = row.querySelector('[data-result="pallets"]').textContent;
            
            csv += `${index + 1};${product.name};${quantity};${transport};${type};${pallets}\n`;
        });
        
        const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = 'transportlogistik_positionen.csv';
        link.click();
        
        showToast('CSV exportiert!');
    }

    function resetCalculator() {
        state.selectedProduct = '015AA';
        state.quantity = 100;
        state.transport = 'sea';
        state.container = '40hc';
        
        document.getElementById('quantity').value = 100;
        document.getElementById('containerType').value = '40hc';
        
        selectProduct('015AA');
        selectTransport('sea');
        
        showToast('Zur√ºckgesetzt');
    }

    // ================================================
    // TOAST
    // ================================================
    function showToast(message) {
        const toast = document.getElementById('toast');
        toast.textContent = message;
        toast.classList.add('show');
        
        setTimeout(() => {
            toast.classList.remove('show');
        }, 2500);
    }

    // ================================================
    // LOCALSTORAGE PERSISTENCE
    // ================================================
    function saveState() {
        localStorage.setItem('transportLogistikState', JSON.stringify(state));
    }

    function loadState() {
        const saved = localStorage.getItem('transportLogistikState');
        if (saved) {
            try {
                const parsed = JSON.parse(saved);
                Object.assign(state, parsed);
                
                // Restore UI
                document.getElementById('quantity').value = state.quantity;
                document.getElementById('containerType').value = state.container;
                selectProduct(state.selectedProduct);
                selectTransport(state.transport);
            } catch (e) {
                console.warn('Could not load saved state');
            }
        }
    }

    // Auto-save on changes
    const originalCalculate = calculate;
    calculate = function() {
        originalCalculate();
        saveState();
    };

    // ================================================
    // INIT
    // ================================================
    document.addEventListener('DOMContentLoaded', () => {
        loadState();
        updateProductSpecs();
        calculate();
        
        // Add initial position
        addPosition();
    });

    // PWA Service Worker Registration (for offline)
    if ('serviceWorker' in navigator) {
        // Inline service worker for true offline capability
        const swCode = `
            self.addEventListener('install', e => self.skipWaiting());
            self.addEventListener('activate', e => e.waitUntil(clients.claim()));
            self.addEventListener('fetch', e => {
                e.respondWith(
                    caches.match(e.request).then(r => r || fetch(e.request))
                );
            });
        `;
        const blob = new Blob([swCode], { type: 'application/javascript' });
        navigator.serviceWorker.register(URL.createObjectURL(blob)).catch(() => {});
    }
</script>
```

</body>
</html>